<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ“¨ Ø§Ø±Ø³Ø§Ù„ Ù¾ÛŒØ§Ù…</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', Tahoma, sans-serif; }
        body { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; display: flex; justify-content: center; align-items: center; padding: 20px; }
        .container { background: rgba(255, 255, 255, 0.95); padding: 30px; border-radius: 16px; box-shadow: 0 10px 30px rgba(0,0,0,0.2); width: 100%; max-width: 450px; }
        h1 { color: #333; text-align: center; margin-bottom: 25px; font-size: 1.8rem; }
        .form-group { margin-bottom: 20px; }
        label { display: block; margin-bottom: 8px; color: #555; font-weight: 600; }
        input, textarea { width: 100%; padding: 14px; border: 2px solid #e1e5e9; border-radius: 10px; font-size: 16px; transition: all 0.3s; background: #f8f9fa; }
        input:focus, textarea:focus { outline: none; border-color: #667eea; background: white; box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1); }
        textarea { min-height: 130px; resize: vertical; }
        .char-count { text-align: left; font-size: 13px; color: #888; margin-top: 6px; direction: ltr; }
        .submit-btn { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; padding: 16px; width: 100%; border-radius: 10px; font-size: 17px; font-weight: 600; cursor: pointer; transition: all 0.3s; margin-top: 10px; }
        .submit-btn:hover { transform: translateY(-2px); box-shadow: 0 7px 14px rgba(102, 126, 234, 0.4); }
        .submit-btn:disabled { opacity: 0.6; cursor: not-allowed; transform: none; }
        .status { padding: 14px; border-radius: 10px; margin-top: 20px; text-align: center; font-weight: 500; display: none; animation: fadeIn 0.4s; }
        .success { background: #e7f7ef; color: #0a5c36; border: 1px solid #b1e6cb; display: block; }
        .error { background: #fdeded; color: #7a1a1a; border: 1px solid #f5c6cb; display: block; }
        .info { text-align: center; margin-top: 25px; color: #666; font-size: 14px; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }
        @media (max-width: 480px) { .container { padding: 20px; } h1 { font-size: 1.5rem; } }
    </style>
</head>
<body>
    <div class="container">
        <h1>Ù¾ÛŒØ§Ù… Ø®ÙˆØ¯ Ø±Ø§ Ø§Ø±Ø³Ø§Ù„ Ú©Ù†ÛŒØ¯</h1>
        
        <form id="contactForm">
            <div class="form-group">
                <label for="name">Ù†Ø§Ù… Ø´Ù…Ø§</label>
                <input type="text" id="name" placeholder="Ù†Ø§Ù… ÛŒØ§ Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ" required>
            </div>
            
            <div class="form-group">
                <label for="message">Ù¾ÛŒØ§Ù…</label>
                <textarea id="message" placeholder="Ù…ØªÙ† Ù¾ÛŒØ§Ù… Ø±Ø§ Ø§ÛŒÙ†Ø¬Ø§ Ø¨Ù†ÙˆÛŒØ³ÛŒØ¯..." required maxlength="1000"></textarea>
                <div class="char-count"><span id="charCount">0</span>/1000 Ú©Ø§Ø±Ø§Ú©ØªØ±</div>
            </div>
            
            <button type="submit" class="submit-btn" id="submitBtn">
                <span id="btnText">Ø§Ø±Ø³Ø§Ù„ Ù¾ÛŒØ§Ù…</span>
            </button>
        </form>
        
        <div id="status" class="status"></div>
        <div class="info">Ù¾ÛŒØ§Ù… Ø´Ù…Ø§ Ù…Ø³ØªÙ‚ÛŒÙ… Ø¨Ù‡ ØªÙ„Ú¯Ø±Ø§Ù… Ù…Ø¯ÛŒØ± Ø§Ø±Ø³Ø§Ù„ Ù…ÛŒâ€ŒØ´ÙˆØ¯.</div>
    </div>

    <script>
        // ğŸ”§ Ù…Ù‡Ù…: Ø§ÛŒÙ† Ø¢Ø¯Ø±Ø³ Ø±Ø§ Ø¨Ø§ Ø¢Ø¯Ø±Ø³ ÙˆØ§Ù‚Ø¹ÛŒ Ø³Ø±ÙˆØ± FastAPI Ø®ÙˆØ¯Øª Ø±ÙˆÛŒ Render Ø¹ÙˆØ¶ Ú©Ù†
        // Ù…Ø«Ø§Ù„: 
        const API_URL = 'https://teest-poba.onrender.com//send';
        
        // Ø§Ù†ØªØ®Ø§Ø¨ Ø¹Ù†Ø§ØµØ±
        const form = document.getElementById('contactForm');
        const messageInput = document.getElementById('message');
        const charCount = document.getElementById('charCount');
        const submitBtn = document.getElementById('submitBtn');
        const btnText = document.getElementById('btnText');
        const statusDiv = document.getElementById('status');
        
        // Ø´Ù…Ø§Ø±Ù†Ø¯Ù‡ Ú©Ø§Ø±Ø§Ú©ØªØ±
        messageInput.addEventListener('input', () => {
            const count = messageInput.value.length;
            charCount.textContent = count;
            charCount.style.color = count > 950 ? '#ff4757' : '#888';
        });
        
        // Ø§Ø±Ø³Ø§Ù„ ÙØ±Ù…
        form.addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const name = document.getElementById('name').value.trim();
            const message = document.getElementById('message').value.trim();
            
            // Ø§Ø¹ØªØ¨Ø§Ø±Ø³Ù†Ø¬ÛŒ Ø³Ø§Ø¯Ù‡
            if (!name || name.length < 2) {
                showStatus('Ù„Ø·ÙØ§Ù‹ Ù†Ø§Ù… Ù…Ø¹ØªØ¨Ø± ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯ (Ø­Ø¯Ø§Ù‚Ù„ Û² Ø­Ø±Ù)', 'error');
                return;
            }
            if (!message || message.length < 5) {
                showStatus('Ù¾ÛŒØ§Ù… Ø¨Ø§ÛŒØ¯ Ø­Ø¯Ø§Ù‚Ù„ Ûµ Ø­Ø±Ù Ø¨Ø§Ø´Ø¯', 'error');
                return;
            }
            
            // ØºÛŒØ±ÙØ¹Ø§Ù„ Ú©Ø±Ø¯Ù† Ø¯Ú©Ù…Ù‡
            submitBtn.disabled = true;
            btnText.textContent = 'Ø¯Ø± Ø­Ø§Ù„ Ø§Ø±Ø³Ø§Ù„...';
            
            try {
                // Ø§Ø±Ø³Ø§Ù„ Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø¨Ù‡ Ø³Ø±ÙˆØ± FastAPI
                const response = await fetch(API_URL, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ name, message })
                });
                
                const data = await response.json();
                
                if (response.ok && data.success) {
                    showStatus('âœ… Ù¾ÛŒØ§Ù… Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§Ø±Ø³Ø§Ù„ Ø´Ø¯', 'success');
                    form.reset();
                    charCount.textContent = '0';
                    charCount.style.color = '#888';
                } else {
                    showStatus(`âŒ ${data.message || 'Ø®Ø·Ø§ Ø¯Ø± Ø§Ø±Ø³Ø§Ù„'}`, 'error');
                }
            } catch (error) {
                showStatus('âŒ Ù…Ø´Ú©Ù„ Ø¯Ø± Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§ Ø³Ø±ÙˆØ±', 'error');
                console.error('Error:', error);
            } finally {
                submitBtn.disabled = false;
                btnText.textContent = 'Ø§Ø±Ø³Ø§Ù„ Ù¾ÛŒØ§Ù…';
            }
        });
        
        // ØªØ§Ø¨Ø¹ Ù†Ù…Ø§ÛŒØ´ ÙˆØ¶Ø¹ÛŒØª
        function showStatus(text, type) {
            statusDiv.textContent = text;
            statusDiv.className = `status ${type}`;
            setTimeout(() => {
                statusDiv.className = 'status';
                statusDiv.textContent = '';
            }, 4500);
        }
        
        // Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ Ø§ÙˆÙ„ÛŒÙ‡
        console.log('ğŸ“¨ ÙØ±Ù… Ø¢Ù…Ø§Ø¯Ù‡ Ø§Ø³Øª. Ø¢Ø¯Ø±Ø³ API:', API_URL);
        if (API_URL.includes('your-render-app-name')) {
            console.warn('âš ï¸ Ù„Ø·ÙØ§Ù‹ Ø¢Ø¯Ø±Ø³ API Ø±Ø§ Ø¯Ø± Ø®Ø· 53 Ø¨Ø§ Ø¢Ø¯Ø±Ø³ ÙˆØ§Ù‚Ø¹ÛŒ Render Ø®ÙˆØ¯ Ø¹ÙˆØ¶ Ú©Ù†ÛŒØ¯.');
        }
    </script>
</body>
  </html>
